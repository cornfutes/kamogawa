<!DOCTYPE html>
<html lang=en-US>
<title>{{.BrandName}}</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="The best way to access your cloud infrastructure.">
<link rel=stylesheet href="./style.css">
<!-- Prevent fake favicon requests. https://stackoverflow.com/questions/1321878/how-to-prevent-favicon-ico-requests. -->
<link rel=icon href="data:;base64,iVBORw0KGgo=">

<body class="üí™ ü™ú üçú üìú üö´">
  <header id="header" class="üí™ üéØ">
    <div class="üí™" id="header-child">
      <div class="üí™">
        <h1 id=logo class="üçú">
          <a href="/"><span id="logo-image">Â∑ù</span></a>
          <span id="tag-beta"><a href="{{.EapUrl}}">Early Access</a></span>
        </h1>
      </div>
      <div id="search-box" class="üí™ üå≥ üëª">
        <input class="üå≥"
          type=text
          placeholder=Search
          spellcheck=false
          autocomplete=off
          aria-label="Search term"
          id="search-input">
        <span id="search-cancel"></span>
      </div>
      <ul class="üçú üí™ ü¶∑ ‚öñÔ∏è top-nav" id="top-nav" >
        {{if .IsLoggedIn}}
        <span class="top-link" id="search-start" tabindex=0></span>
        <form method="post" action="/logout" id="top-link">
          <input type="hidden" name="name" value="value" />
          <a onclick="this.parentNode.submit();">Logout</a>
        </form>
        <a href="/account">Account</a>
        {{else}}
        <a href="/demo">Demo</a>
        {{end}}
      </ul>
    </div>
  </header>
  <div class="üí™ üå≥ ‚öñÔ∏è">
    {{template "main" .}}
  </div>
  <footer class="üí™ ü™ú">
    <div class="üìû" style="margin-bottom: 12px">
      <a href="{{.EapUrl}}">Join our Early Access Program!</a>
    </div>
    <ul class="üî´ üçú üö´ footer-links">
      <li><a href="about.txt">About</a></li>
      <li><a href="api.txt">API</a></li>
      <li><a href="security.txt">Security</a></li>
      <li><a href="legal.txt">Legal</a></li>
      <li><a href="mailto:{{.ContactEmail}}">Contact</a></li>
    </ul>
  </footer>
<script>
let $d = document,
    rm = (l, c) => l.classList.remove(c),
    ad = (l, c) => l.classList.add(c),
     $ = l => $d.getElementById(l),
     z = 'addEventListener',
     p = 'preventDefault',
     c = 'click',
     u = 'keyup',
     k = 'Enter',
     j = false,
     q = '',
    $m = $('main'),
    $l = $('logo'),
    $t = $('top-nav'),
    $s = $('search-box'),
    $a = $('search-start'),
    $i = $('search-input'),
     s = q => window.location.href = `/search?q=${encodeURI(q)}`,
    fo = _ => { j=true ; rm($s, 'üëª'); ad($t, 'üëª'); ad($m, 'üåÉ'); ad($l, 'üåÉ'); if(q && q.length > 0) $i.value= q; $i.focus(); }
  defo = _ => { j=false; ad($s, 'üëª'); rm($t, 'üëª'); rm($m, 'üåÉ'); rm($l, 'üåÉ');                       $i.value='';             }

if($a) {
  $a[z](c, fo);
  $a[z](u, e => {
    if (e.code == k) {
      e[p]();
      fo();
    }
  });
}

$d[z](u, e => { if (!j&& e.code == 'Backslash') e[p](), fo(e); });

$i[z](u, e => {
  if(!j) return;
  if (e.code == 'Escape') e[p](), defo();
  else if (e.code == k) {
    {{if .IsLoggedIn}}
      e[p]();
      s($('search-input').value);
    {{else}}
      window.location.href = '/login?error=4';
    {{end}}
  } else if (e.code == 'Tab') e[p]();
});
$('search-cancel')[z](c, defo);

const lNav = $("nav-gcp"); if (lNav) {
  if (localStorage.getItem('nav-gcp-open') == 'true') lNav.open = true;
  lNav[z]("toggle", _ => localStorage.setItem('nav-gcp-open', lNav.open));
} 

console.log("%c Hello Y = f=>(x=>x(x))(x=>f(y=>x(x)(y)))", "font-size:24px;background:#67b26f;background:-webkit-linear-gradient(to right, #67b26f, #4ca2cd); background: linear-gradient(to right, #67b26f, #4ca2cd);color:white;text-align:center;padding:10px 15px;width:100%;border-radius:20px;");   

{{if eq .IsSearch "yes" }}
 let            f = ['all', 'substring', 'lastmonth'],
            elSoq = $('search-original-query'),
              $qb = $('query-builder'),
              $r  = $('s-b-r'), 
                r = $("query"),
              $sm = $('s-mod'),
              $re = $('s-re'),
               $h = $('s-h'),
               dd = 'down',
              sqb = false,
             o$sm = _ => {
                      if(sqb) ad($sm, dd), ad($qb, "ü•∑");
                      else    rm($sm, dd), rm($qb, "ü•∑");
                      sqb = !sqb;
                    },
            reset = _ => { 
                      elSoq.innerText = ''; ad($r, 'ü•∑'); 
                      rm($h, '‚ö°'); ad($re, '‚ö°'); 
                    };
{{if .Query}}q = '{{.Query}}' {{end}};
o = q || '';

$sm[z](c, o$sm); 
$sm[z](u, e => {
  if(e.code != k) return;
  event[p]();
  o$sm();
});

$r[z](c, _ => { r.value = o, reset() });
    

function change(e, i) { 
  f[i] = e.target.value; 

  let tk = [];
  if(f[0] != "all"      ) tk.push("provider:" + f[0]);
  if(f[1] != "substring") tk.push(    "algo:" + f[1]);
  if(f[2] != "lastmonth") tk.push(    "time:" + f[2]);
  if(tk.length) {
    q = [r.value.split(":::")[0].trim(), ":::", ...tk].join(" ").trim();
    if (q == o) {
      r.value = o;
      reset();
    } else {
      r.value = q;
      ad($h, '‚ö°');
      elSoq.innerText = o;
      rm($re, '‚ö°');
      rm($r, 'ü•∑');
    }
  } else {
    r.value = r.value.split(":::")[0].trim();
    if(r.value == o) reset();
  }
}
r[z](u, e => {
  e[p]();
  if(e.code == k) s(e.target.value);
  else if(e.target.value == o) q = e.target.value, reset();
  else {
    q = e.target.value;
    ad($h, '‚ö°');
    elSoq.innerText = o;
    rm($re, '‚ö°');
    rm($r, 'ü•∑');
  }
});
$re[z](c, e => {
  if(q != o) {
    e[p]();
    s(q);  
  }
});
$re[z](u, e => e.code == k && q != o && e[p]() && s(q));
{{end}}

const lnl = $d.querySelectorAll('.left-nav-link');
lnl && lnl.forEach(el => {
  if (el.querySelector('a').href.split('?')[0] == window.location.href.split('?')[0]) {
    el.classList.add('active');
    return;
  }
});
</script>